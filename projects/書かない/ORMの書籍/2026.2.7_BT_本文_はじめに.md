# なに
はじめにの本文書く

## 企画
- なぜこの本をあなたは読まないといけないのか？　というところ
- ソフトウェアとデータベース、二つのパラダイムの接する箇所。アプリケーションから見ると永続化レイヤーをどう抽象化するかという問題
- どんなアプリケーションもここから自由にはなれない
	- ORMを通じて、これを全部見るというのがこの書籍の目的

## 構成
- ORMとは
- なぜ今ORMなのか
- 構成の説明
- タイトル回収
## きもち
- いよいよ
- はじめにが一番難しいんよ
# 書く

- はじめに
- 本書の目的
	- この書籍はORMについて書く本です
		- ORMはアプリケーションとデータベースの仲立ちをするミドルウェア。本来そのままでは使えない、使うのが大変なのでどうにかする
			- みんなWebアプリを始めて作った時、必ずORMを触ります。けどそのあとはそこまで仲良くなることはない。ORMは大学のオリエンテーションでだけ一瞬なかよくなったようなやつ
		- けど、この領域は本来ITエンジニアにとってとても大切なところ
		- なぜか？　アプリケーションとデータベースが交わるところ
			- データベースは永続化の話。永続化レイヤーの抽象化をするのがORM
			- 本書はORMの書籍ですが、ORMを通じて永続化レイヤー抽象化の課題とその解決方法を全て論じる、というのが狙い
	- いまこそORM
		- 現代はアプリケーションの変化が早い
		- DDDやスクラムの登場でいかに事業にシステムが追従する・リードするかを考えていたところに、AIがでてくる
		- しかしデータベースは変化しない。簡単には変化しない
		- これをどうにかする必要がある。ORMはそんな領域を扱っており、そのふたつのパラダイムの衝突を解決する必要がある
- 自己紹介
	- もりた
	- レバテック社でバックエンドエンジニアをしてる
	- 好きな技術はデータベース。こんな記事を書いてる
	- MySQLアンカンファレンスというMySQL界隈のイベントを共同主催してる
	- 参加者の7割がDBAで、その中でアプリケーション開発者の視点でいろいろ話すこともある
	- その経験で考えたことを書く
- 本書は以下の三章構成です
	- 第一章は永続化レイヤー抽象化の課題。さらに三つの節にわけて解説します
		- ひとつめは歴史の節
			- 永続化レイヤー抽象化にどんな課題があるのかを説明します。ここではまず歴史的にどんな課題や解決策が模索されてきたのかをコンピュータ科学の歴史やアメリカ産業史から探ります
		- ふたつめの節は、その他の課題
			- 歴史には登場しないけど、解決が求められている現代的なものもあるので、ここで漏らさず紹介します
			- 例えばマイグレーションの問題などがこれ。実はORMとは別物ではあるのですが、一緒になってるケースもあり永続化レイヤーをアプリケーションが扱う上で大切。他にはテストの問題。デファクトスタンダードとなる解決方法はまだないと言って良いが、扱います
			- ORMの扱うメインの課題と言われるインピーダンスミスマッチの問題もここで詳しく扱う
		- みっつめの節は、課題に対してどんな解決策がこれまで出てきたのか
			- ORMの登場までにもいろんなアプローチがありました。その紹介と、なぜORMなのか？　を解説します
	- 第二章はORMの世界。これも三つに分かれる
		- ORMの概要
			- これは概要と、主要な課題意識であるインピーダンスミスマッチについて解説します
			- また、ふたつの大きな流派についても解説します
		- ORMの主要コンポーネント
			- どんなコンポーネントで構成されるか解説し、、ORMに対しての概観を持ってもらいます
			- 面白い解決方法をとるORMがあればここでも解説したい
		- ORMをどう選ぶ？
			- 課題を整理し、どんなユースケースでどんなORMが必要になるかまとめます
			- ORMソムリエみたいなことができれば嬉しいです
	- ORMをつくろう
		- さいごに、ORMを作りましょう！
		- 最小のORMをつくり、作ることでORMを学びましょう
- はじめにのおわり
	- データを保存する、というのは私たちが普段なにげなくやっている行為。こうやって書籍にすることもデータの永続化。石板時代からある。自然科学とさえおもえる
	- その普遍的なものに対して、私たちのつくったソフトウェア工学がどう挑むのか？　をみることでもある
	- たぶん人類が滅んで、次の文明が地球に現れても、ORMは登場する。次の文明のためにこの書籍を残します

## ほんとの本文
## はじめに
### 本書の目的
本書はORマッパーについて解説する本です。
ORマッパーはアプリケーションとデータベースの仲立ちをするミドルウェアです。主な役割としてデータベースへの接続やクエリの発行、スキーマ管理など、アプリケーションがデータベースとやり取りする際の様々なタスクを抽象化し、使いやすく提供しています。
皆さんも初めてWebアプリを作った時、そこにはなんらかのWebフレームワークとORMがいたのではないでしょうか？　プログラミング初学者にとってデータベースは難解で、よくわからないものに映ります。そこを助けてくれるのがORMでした。
また、システム開発現場でもORマッパーは活躍しています。ほとんどの開発現場ではORMが採用されています。みなさんの周りにも、PHPならEloquent, TypeScriptならPrisma, JavaならHibernateといった多種多様なORMがあるのではないでしょうか？

その一方で、ORMが使える、以上のものになることはあまりありません。例えるなら大学のオリエンテーションでだけ一瞬なかよくなったようなクラスメイトのような立ち位置です。
本来、データベースとのやりとりはWeb系のエンジニアにとってとても大切な領域のはずです。Web開発にとってWebとDBは2大要素であり、その仲立ちをするORMが重要でないわけがありません。

本書ではこの「重要なはずなのに深く学ばれる機会がない/学ぶための資料もない」という状況を課題と思い、書かれています。なお「データベースとのやりとり」をもう少し固い言葉で表現すると、永続化レイヤー抽象化と呼びます。本書はORMの書籍ですが、ORMを通じて永続化レイヤー抽象化の課題とその解決方法を全て論じます。
### いまこそORM
また、システム開発の潮流としても、永続化レイヤー抽象化を論じる重要性は上がるばかりです。
現代のアプリケーション開発にまつわる課題は「システムがいかに事業に追従し、リードするか」という一文に集約されると思います。ビジネスの問題を高速に解決するためにドメイン駆動設計やスクラム開発、プロダクトマネジメントなどの考え方は存在します。しかし、そんな変化の速いアプリケーションに対して、データベースは簡単に変化することができません。このふたつのパラダイムの差を吸収するのがORMでした。
そしてLLMが導入され速度を求められるシステム開発現場ではより一層、永続化レイヤーを抽象化することの重要性は増していくでしょう。

### 自己紹介
それではそんなことをいうお前は誰やねんということで、自己紹介をします。
わたしはもりたと申します。インターネット上では@mconfjpのアカウントで活動しおり、本職ではレバテックというITエンジニア向け転職サイトでバックエンドエンジニアをしています。また、データベースが好きで、MySQLアンカンファレンスというイベントの共同主催もしています。

### 本書の内容
本書の内容は以下のとおりです。

第一章は永続化レイヤー抽象化の課題を扱います。

- 1-1. 永続化レイヤー抽象化の歴史
	- ここではまず歴史的にどんな課題や解決策が模索されてきたのかをコンピュータ科学の歴史やアメリカ産業史から探ります
- 1-2. その他の課題
	- 歴史では紹介しきれなかった課題を含め、現代の課題をここでまとめます
	- ORMの扱うメインの課題と言われるインピーダンスミスマッチの問題もここで扱います
- 1-3. 歴史上の解決策
	- ORMの登場以前以後問わず、さまざまなアプローチが存在します。その紹介と、なぜORMなのか？　を解説します

第二章では実際にORMの中身を見ていきます。

- 2-1. ORMの概要
	- これは概要と、主要な課題意識であるインピーダンスミスマッチについて解説します
	- また、ふたつの大きな流派についても解説します
- 2-2. ORMの主要コンポーネント
	- どんなコンポーネントで構成されるか解説し、実装の内容を確認します
- 2-3. ORMをどう選ぶ？
	- 課題を整理し、どんなユースケースでどんなORMが必要になるかまとめます

第三章はORMをつくろう！　の章です。

- 3-1. ORMをつくろう
	- 最小のORMをつくり、作ることでORMを学びましょう

### 人類が滅んでも使えるORM
データを保存する、というのは私たちが普段なにげなくやっている行為です。メモを取ることや、写真を撮ることも永続化です。石板時代から存在する、とてもプリミティブな行為です。
永続化レイヤー抽象化の取り組みとは、その普遍的でプリミティブなものに対して、私たちのつくったソフトウェア工学がどう挑むのか？　ということでもあります。
人類が滅んで、次の文明が地球に現れても、きっとORMは登場します。次の文明のためにもこの書籍を残します。