# ORマッパーの歴史と進化に関する調査資料

## 参考文献

1. "What is an ORM – The Meaning of Object Relational Mapping Database Tools" - freeCodeCamp  
   https://www.freecodecamp.org/news/what-is-an-orm-the-meaning-of-object-relational-mapping-database-tools/

2. "Object–relational mapping" - Wikipedia  
   https://en.wikipedia.org/wiki/Object–relational_mapping

3. "A brief history of Object Relational Mapping" - Antonio's Blog  
   https://antoniogoncalves.org/2008/09/27/a-brief-history-of-object-relational-mapping/

4. "The Rise and Fall of Object Relational Mapping" - maetl  
   https://maetl.net/talks/rise-and-fall-of-orm

5. "Twenty years of object-relational mapping: A survey on patterns, solutions, and their implications on application design" - ScienceDirect  
   https://www.sciencedirect.com/science/article/abs/pii/S0950584916301859

6. "What is an ORM, how does it work, and how should I use one?" - Stack Overflow  
   https://stackoverflow.com/questions/1279613/what-is-an-orm-how-does-it-work-and-how-should-i-use-one

7. "What is object-relational mapping (ORM)?" - TechTarget Definition  
   https://www.theserverside.com/definition/object-relational-mapping-ORM

8. "Object-relational Mappers (ORMs)" - Full Stack Python  
   https://www.fullstackpython.com/object-relational-mappers-orms.html

9. "What Is an ORM? How Does It Work? How Should We Use One?" - Baeldung on Computer Science  
   https://www.baeldung.com/cs/object-relational-mapping

10. "What is Object-Relational Mapping (ORM) in DBMS?" - GeeksforGeeks  
    https://www.geeksforgeeks.org/what-is-object-relational-mapping-orm-in-dbms/

11. "Active Record Basics" - Ruby on Rails Guides  
    https://guides.rubyonrails.org/active_record_basics.html

12. "Modern ORM Frameworks in 2025: Django ORM, SQLAlchemy, and Beyond" - nucamp  
    https://www.nucamp.co/blog/coding-bootcamp-backend-with-python-2025-modern-orm-frameworks-in-2025-django-orm-sqlalchemy-and-beyond

13. "What is the Difference between Active record and ORM in rails?" - Stack Overflow  
    https://stackoverflow.com/questions/38562565/what-is-the-difference-between-active-record-and-orm-in-rails

14. "ActiveRecord is the best ORM I've ever used, in any language" - Hacker News  
    https://news.ycombinator.com/item?id=20921947

15. "Django ORM vs SQLAlchemy" - GeeksforGeeks  
    https://www.geeksforgeeks.org/django-orm-vs-sqlalchemy/

16. "There is a php ORM which is similar to Rails ActiveRecord?" - Stack Overflow  
    https://stackoverflow.com/questions/20547467/there-is-a-php-orm-which-is-similar-to-rails-activerecord

17. "Django vs Ruby on Rails Comparison. Which Framework is Better?" - DjangoStars  
    https://djangostars.com/blog/django-or-rails/

18. "What is ActiveRecord equivalence in the node.js world?" - Stack Overflow  
    https://stackoverflow.com/questions/11393438/what-is-activerecord-equivalence-in-the-node-js-world

19. "I like SQLAlchemy a lot" - DEV Community  
    https://dev.to/thejessleigh/comment/6geb

20. "The ORM Delusion" - Matthew Daly  
    https://matthewdaly.co.uk/blog/2022/06/05/the-orm-delusion/

21. "Prisma - Next-generation ORM for Node.js & TypeScript"  
    https://www.prisma.io/orm

22. "GitHub - prisma/prisma: Next-generation ORM for Node.js & TypeScript"  
    https://github.com/prisma/prisma

23. "Prisma - Simplify working and interacting with databases"  
    https://www.prisma.io

24. "Prisma VS TypeORM - description and comparison" - DEV Community  
    https://dev.to/afl_ext/prisma-vs-typeorm-description-and-comparison-4bob

25. "Comparison of Popular JavaScript ORMs: Prisma, TypeORM, and Sequelize" - GeeksforGeeks  
    https://www.geeksforgeeks.org/comparison-of-popular-javascript-orms-prisma-typeorm-and-sequelize/

26. "Prisma – The Complete ORM for Node.js & TypeScript"  
    https://www.prisma.io/blog/prisma-the-complete-orm-inw24qjeawmb

27. "Prisma – ORM for Node.js and TypeScript" - Hacker News  
    https://news.ycombinator.com/item?id=26887724

28. "Releases - prisma/prisma" - GitHub  
    https://github.com/prisma/prisma/releases

29. "Should you use Prisma ORM as a Node.js/TypeScript ORM?" - Prisma Documentation  
    https://www.prisma.io/docs/orm/overview/introduction/should-you-use-prisma

30. "TypeScript & Prisma - TypeScript ORM for SQL Databases"  
    https://www.prisma.io/typescript

31. "From Rust to TypeScript: A New Chapter for Prisma ORM"  
    https://www.prisma.io/blog/from-rust-to-typescript-a-new-chapter-for-prisma-orm

32. "Rust to TypeScript Update: Boosting Prisma ORM Performance"  
    https://www.prisma.io/blog/rust-to-typescript-update-boosting-prisma-orm-performance

33. "Choosing a Rust Database Crate in 2023: Diesel, SQLx, or Tokio-Postgres?" - Rust Trends  
    https://rust-trends.com/posts/database-crates-diesel-sqlx-tokio-postgress/

34. "A Guide to Rust ORMs in 2024" - Shuttle  
    https://www.shuttle.dev/blog/2024/01/16/best-orm-rust

35. "Optimized API Calls with TypeScript: Performance Showdown vs. Rust & Go" - DEV Community  
    https://dev.to/hamzakhan/optimized-api-calls-with-typescript-performance-showdown-vs-rust-go-4495

36. "Performance Benchmarks: Comparing Query Latency across TypeScript ORMs & Databases"  
    https://www.prisma.io/blog/performance-benchmarks-comparing-query-latency-across-typescript-orms-and-databases

37. "Top 5 ORMs for Developers in 2025" - Strapi  
    https://strapi.io/blog/orms-for-developers

38. "The Future of Rust in 2025 [Top Trends and Predictions]" - GeeksforGeeks  
    https://www.geeksforgeeks.org/future-of-rust/

39. "An Overview of Popular Rust ORMs" - MakeUseOf  
    https://www.makeuseof.com/popular-rust-orms-overview/

40. "Benchmark TypeScript Parsers: Demystify Rust Tooling Performance" - DEV Community  
    https://dev.to/herrington_darkholme/benchmark-typescript-parsers-demystify-rust-tooling-performance-2go8

## 1. ORマッパーの始まり

ORマッパー（Object-Relational Mapper）の歴史は、オブジェクト指向プログラミングとリレーショナルデータベースの間の「インピーダンスミスマッチ」問題を解決するための技術として始まりました。最初の商業的に成功したORマッパーは「TOPLink」というSmalltalk用の製品で、後にJavaの初期バージョンに移植されました。このTOPLinkは現在でいうところの「データマッパーパターン」を実装していました。

TOPLinkはEntityBeansのCMP（Container-Managed Persistence）より前に存在していたORMモデルでした。つまり、JavaのEntity Beansは最初のORMモデルではなかったのです。

## 2. 90年代から2000年代初頭の発展

Javaの最初のTopLinkリリースから約20年、ORマッピングソリューション（ORMS）は現在、人気のある開発プラットフォームで広く利用可能になっており、開発者がインピーダンスミスマッチ問題（オブジェクト指向とリレーショナルの間のギャップ）に対処するための便利なツールを提供しています。

2000年にはThe Object Peopleを共同買収した後、コンサルティング部門（TopLink関連ではない）はBEAに売却され、TopLinkは新しいスタートアップであるWebGainに売却されました。

2001年にはJSR 19: Enterprise JavaBeans 2.0が2001年9月にリリースされ、続いてJSR 153: Enterprise JavaBeans 2.1が開始されました（Webサービスサポートとタイマーサービスを導入）。

## 3. 主要なORマッパーの登場

EntityBeansは技術的にはTopLinkやJDOよりも進んでいたわけではなかったものの、商業的に勝利しました...しかしそれも数年だけでした。なぜなら2002年にHibernateが登場したからです。

その後、様々なORマッパーが開発されていきました。例えば：
- RedBeanPHP: ゼロコンフィグオブジェクトリレーショナルマッパー
- Entity Framework: マルチデータベースオブジェクトデータベースマッパー（SQL、SQLite、MySQL、PostgreSQLなどをサポート）
- NHibernate: オープンソースのオブジェクトリレーショナルマッパー
- Dapper: マイクロORMで、主にクエリをオブジェクトにマッピングするのに使われる

## 4. 様々な実装パターン

ORMツールには主に2つの戦略があります：
1. アクティブレコードパターン：プログラミングコード内のオブジェクトの構造内でデータをマッピングし、コード内のクラスと構造を使ってデータを管理します。
2. データマッパーパターン：ビジネスロジック（オブジェクト内）を基礎となるデータベースから分離して、同じプログラミングロジックの再利用を可能にしながらデータベースの変更を簡素化します。

## 5. その他の主要なORマッパー

### Ruby on Rails の ActiveRecord
ActiveRecordはRuby言語用のORMで、「Active Record」パターンに基づいています。ActiveRecordはRuby on Railsのコアコンポーネントで、オブジェクト指向のRubyコードとリレーショナルデータベースをつなぐ役割を果たします。これを使うと、開発者はSQLを直接書くことなく、データベースからオブジェクトを簡単に取得・操作できるようになります。

Ruby on Railsは、Silicon Valleyでも人気のフレームワークで、Airbnb、Etsy、Spotifyなどの大手スタートアップが使用しています。RailsのActiveRecordは「メモリ使用量が多い」というデメリットがありますが、「素早く立ち上げて基本的なことをやるためのツールキットとして、かなり素晴らしいプロジェクト」と評価されています。

### Django ORM
Django ORMはDjangoウェブフレームワークの一部で、Active Recordパターンに従っています。各Djangoモデルはデータベーステーブルを表し、モデルインスタンスはテーブルの行にマッピングされるという仕組みです。

Django ORMの特徴として、自動スキーマ生成（マイグレーション）やForeignKeyやManyToManyFieldのような宣言的リレーションシップがあります。Django ORMはRailsのActiveRecordと同様に「Active Record」パターンに基づいており、簡単に使えますが、SQLAlchemyと比べると機能は限定的です。

### SQLAlchemy
SQLAlchemyは「Data Mapper」パターンに基づいたORMで、Django ORMほどシンプルではないですが、より多くの機能を提供します。

SQLAlchemyはPythonエコシステムで人気のORMで、非同期サポートや強化された型ヒントなど、モダンなウェブアプリケーションに最適な機能が追加されています。PostgreSQL、MySQL、SQLiteなど様々なデータベースバックエンドを扱える柔軟性も魅力です。

### Node.js の Sequelize
Node.jsの世界では、SequelizeがActiveRecordに相当するORMとして使われています。ただ、「ActiveRecordはシンプルだけど、Sequelizeは冗長」という意見もあります。

### PHP の Eloquent
PHPでは、LaravelのEloquent ORMがRailsのActiveRecordに似たORMとして人気があります。スタンドアロンで使うには少し手間がかかりますが、その価値はあると評価されています。

## 6. Prismaの特徴と歴史

### Prismaの特徴
Prismaは、Node.jsとTypeScript向けの次世代ORMで、PostgreSQL、MySQL、SQL Server、SQLite、MongoDB、CockroachDBなどのデータベースをサポートしています。型安全性、自動マイグレーション、直感的なデータモデルなどの機能を提供しています。

Prisma ORMは主に3つのツールで構成されています：
- Prisma Client: Node.js & TypeScript用の自動生成された型安全なクエリビルダー
- Prisma Migrate: 宣言的データモデリング＆マイグレーションシステム
- Prisma Studio: データベース内のデータを閲覧・編集するためのGUI

### Prismaの歴史と進化
Prismaは2年以上の開発期間を経て、本番環境で使用できる状態になりました。現在はPostgreSQL、MySQL、SQLite、SQL Server（プレビュー）をサポートしており、MongoDBコネクタも開発中です。

当初PrismaはRustで書かれたクエリエンジンを使用していましたが、最近ではTypeScriptへの移行が進められています。この変更により、コミュニティの参加障壁が下がり、デプロイの複雑さが軽減され、様々な実行環境との互換性が向上すると期待されています。

### Prismaの強み
PrismaはTypeScriptエコシステムで唯一の完全な型安全性を持つORMです。生成されるPrisma Clientは、部分的なクエリやリレーションに対しても型付けされた結果を保証します。

PrismaはRustで書かれたクエリエンジンを使用しており、イベントループの各ティックでクエリを結合・最適化することで、GraphQLのN+1問題を解決しています。また、素晴らしいチームとコミュニティがバックアップしているのも大きな強みです。

Prismaは最近注目を集めているモダンで軽量なORMで、TypeScriptのサポートがすぐに使える形で提供されています。クリーンで直感的な構文と生成されるTypeScriptの型により、非常に安全な開発体験が保証されます。

### Prismaの最新動向
最近のPrismaの大きな変更として、RustベースのクエリエンジンをWASMモジュールとTypeScriptに置き換える「Query Compiler」プロジェクトが進行中です。この変更により、クエリのパフォーマンスが向上し、バンドルサイズが85〜90%削減され、様々なウェブフレームワークやバンドラーとの互換性も向上すると期待されています。

Prismaチームは現在、PrismaのコアをRustからTypeScriptに移行する作業を進めています。これは単なるプログラミング言語の変更ではなく、PrismaのアーキテクチャをRustで書かれた「Query Engine」から「Query Compiler」と呼ばれるよりリーンで効率的なアプローチに根本的に改善するものです。

## 7. ORマッパーが解決した問題

### オブジェクトリレーショナルインピーダンスミスマッチ
オブジェクト指向言語とリレーショナルデータベースの間には「オブジェクト-リレーショナル・インピーダンス・ミスマッチ」と呼ばれる問題があります。これは、オブジェクト指向の概念（継承、カプセル化など）とリレーショナルデータベースの概念（テーブル、キーなど）の間の根本的な違いから生じる問題です。

### コード量の削減
ORMを使うと、開発者はSQLを直接書く代わりにプログラミング言語のコードを書くことができ、特にプロジェクトの初期段階でウェブアプリケーションの開発を加速することができます。

### データベース変更の簡素化
ORMはデータソースの詳細を隠蔽・カプセル化するので、データソースやそのAPIが変更された場合でも、変更が必要なのはORMのみで、それを使用するアプリケーションは変更する必要がありません。これにより、アプリケーションの保守が容易になります。

## 8. 現代のORマッパーの特徴と進化

### パターンの多様化
現代のORMツールには主に2つの戦略があります：
1. アクティブレコードパターン - プログラミングコード内のオブジェクトの構造内でデータをマッピング
2. データマッパーパターン - ビジネスロジック（オブジェクト内）を基礎となるデータベースから分離

Django ORMとRailsのActiveRecordは「Active Record」パターンを使用していますが、SQLAlchemyは「Data Mapper」パターンを使用しています。このパターンの違いが各ORMの設計哲学や使い方にも影響しています。

### 非同期サポートの強化
近年のORMフレームワークは非同期サポートを強化しています。SQLAlchemyの最新版では、非同期サポートと強化された型ヒントを含むようになり、モダンなウェブアプリケーションに最適になりました。

### マイグレーション機能
Django ORMはマイグレーションフレームワークを提供しており、データベーススキーマの変更を管理します。変更をプログラミング言語のコードで定義すると、ORMが自動的に必要なSQL文を生成してデータベースに適用します。これにより、手動でSQLスクリプトを管理するよりもスキーマの進化が簡単になり、エラーのリスクも減ります。

### パフォーマンスとセキュリティの向上
最高のORMツールは、アプリケーションのパフォーマンスに影響を与えることなく高品質のコードを作成し、データベースの移行をサポートし、データスキーマを改善するオプションを提供します。また、開発を迅速化し、開発コストを削減し、SQLインジェクションなどの攻撃の可能性を最小限に抑えてアプリケーションのセキュリティを向上させます。

### フレームワークとの統合
Django ORMはDjangoフレームワークの不可欠な一部です。この緊密な統合により、開発が簡素化され、モデルとDjangoエコシステム間の互換性が保証されます。一方、SQLAlchemyはDjangoやFlask、Pyramidなどの他のウェブフレームワークとシームレスに連携することができ、ウェブフレームワークなしのスタンドアロンプロジェクトでも使用できるという柔軟性があります。

### タイプセーフティの向上
最近のORMはタイプセーフティを重視しており、静的解析ツールとの連携が強化されています。例えばLaravelのEloquentでは、IDE Helperを使って現在のデータベース構造に基づいた適切なアノテーションを生成することができ、コードの安全性と開発効率を向上させています。

## 9. ORマッパーを選ぶ基準

### パフォーマンス
ORMの選択においてパフォーマンスは重要な要素です。データベースに送信されるすべてのクエリを捕捉し、詳細なトレース情報を使ってパフォーマンスに関する洞察を提供する機能も重要な判断材料になります。

パフォーマンスを最重視する場合、特に非同期I/Oが必要な場合は、そのために設計されたORMを選ぶべきです。例えばRustの世界では、Diesel、SQLx、Tokio-Postgresなどから選ぶことになり、それぞれに強みがあります。

### 型安全性
Prismaは型安全性に強い重点を置いており、宣言的マイグレーションをサポートし、PostgreSQL、MySQL、SQLite、SQL Serverなどの複数のデータベースをサポートしています。

型安全性を重視する場合、Rustの型システムと強力に統合されているDieselが最も堅牢なコンパイル時チェックを提供します。SQLxもコンパイル時のSQLの検証を提供しており、型安全性を優先するプロジェクトに適しています。

### チーム経験とスキルセット
ORMを選ぶ際には、チームの既存の専門知識を考慮することが重要です。Sequelizeは学習曲線が最も緩やかですが、Prismaの優れたドキュメンテーションとTypeScriptのサポートは、モダンなJavaScriptエコシステムに慣れているチームの採用を加速させることができます。

スキルセットの障壁も考慮すべき点です。例えば、PrismaのRustクエリエンジンに貢献するには、RustとTypeScriptの両方の知識が必要であり、コミュニティの参加機会が減少していました。このような理由から、現在ではTypeScriptへの移行が進められています。

### スケーラビリティ要件
成長の見通しとデータベースのニーズを評価することが重要です。スケーラビリティ要件によって、適切なORMの選択は変わってきます。

プロジェクトの具体的なニーズによって、ORMの選択は異なります。強力なORM機能を持つものや、非同期サポートと型安全性を持つもの、低レベルの制御を提供するものなど、プロジェクトに最適なものを選ぶべきです。

### フレームワークとの互換性
Prismaは、MySQLやPostgreSQLなどのSQLデータベースに対して型安全なアクセスを提供し、そのTypeScriptとの統合は、間違いを減らすために設計されています。

Rustの世界では、SeaORMが非同期対応のORMとして注目されており、SQLxの上に構築されてRawのSQLを抽象化し、モデルとしての構造体を使用するためのクリーンなインターフェースを提供しています。また、LocoというフレームワークはSeaORMを活用して「Ruby on Rails」のような体験をRustで再現しようとしています。

## 10. 将来のORMトレンド

### Rustからの移行
PrismaがRustからTypeScriptへの移行を進めているように、将来的には言語間のデータ変換のオーバーヘッドを減らすためのアーキテクチャ変更が増えるでしょう。新しいアーキテクチャでは、クエリはWASMコンパイラに渡され、クエリプランが返されて、それがTypeScriptで完全に実行されるようになります。

Rustベースのツールは、コードをトランスパイルするスピードで知られていますが、コードをJavaScriptで使用可能なASTに変換する際には異なる結果が出ることがあります。RustのデータをJavaScriptに渡す過程は複雑で、パフォーマンスに大きな影響を与える可能性があるため、この点を最適化することが重要です。

### TypeScriptとの統合強化
Prismaは型安全性を中心に構築されており、ミスを減らすことを目指しています。TypeScriptの構造的型システムを活用することで、Prismaは書くすべてのPrisma Clientクエリに対して、返されるデータの正確な形状を知ることができます。

TypeScriptはNode.jsと組み合わせて、スケーラブルで信頼性の高いAPIを構築するために使用されることが多いです。将来的には、RustやGoのパフォーマンスメリットを活かしつつも、TypeScriptの開発効率を損なわないハイブリッドアプローチが増えるでしょう。

### マルチデータベースサポート
Rustのようなプログラミング言語は、そのパフォーマンスとメモリの安全性から、今後さまざまな領域での採用が増加すると予想されます。ウェブ開発、組み込みシステム、機械学習からゲーム開発まで、影響力は拡大し続けるでしょう。

DieselのようなRust ORMは、その堅牢な機能、効率的なパフォーマンス、そして活発なコミュニティサポートにより、広く採用されています。Rust開発者向けの信頼性が高く堅牢なORMソリューションであり続けるため、Dieselの開発チームはその機能の洗練と拡張に専念しています。

### クラウドネイティブとサーバーレス対応
PrismaのQuery Compilerプロジェクトなどの変更により、バンドルサイズの大幅な削減が実現され、デプロイが迅速になり、より多くのプラットフォームに簡単にアプリをデプロイできるようになります。これはAWS LambdaやCloudflare Workersなどの環境での使用を容易にします。

ORMを使用することで、複雑でエラーが発生しやすいクエリを手動で書く必要がなくなります。代わりに、データの挿入、更新、クエリなどの一般的なデータベース操作のためのシンプルで直感的なAPIを通じて、ORMフレームワークのパワーを活用できます。