# なに
よむ
https://www.prisma.io/docs/orm/prisma-migrate/getting-started
## リポジトリどうしよ
- リポジトリを用意して作りながら学びたい気持ちはあるが、しかしどうしよかな
- いったんなしで進めよう

# よむ
## Prisma Migrateをゼロから始める
- 始め方
	- schema.prismaを作って、修正し、`prisma migrate dev -name xxx`すればマイグレーションファイルが作られる
## 既存のプロジェクトにPrisma Migrateを追加する
- 途中から管理
	- DBをpullしてschema.prismaを作り、ベースライン移行なるものを作成し、適用する
	- なんか他にも書いてあったけどちょっと意味が伝わらない
- ベースライン移行とは
	- prisma利用前にデータベースが存在してて、かつデータが入っているのでリセットとかもできないやつ
		- 逆にいうとこれ普通にやったらデータ消えんの？
	- ここら辺、多分原文でもイマイチな文章になってる気がする。
- つまりやってるのは、
	- 本番DBのスキーマ情報をschema.prismaに保存
	- 過去のマイグレーションファイルをリセット
	- 新しく作ったマイグレーションファイルに、現在のschema.prismaを作るマイグレーションを一発で生成する
- 外部キーの生成順は考慮してくれないから、いい感じにやる必要がある
	- ここまでの感じ、prismaはあんまり頭良さそうに見えない
	- ドキュメントが雑で、外部キーの順番さえ考慮してくれないアホアホORM

### 整理し直す
- すでに本番稼働しているシステムなどで、prismaに移行するための手順
	- 普通にやろうとすると、prismaのマイグレーションファイルを作成した後にすでに作成されているカラムを再度作成しようとしてしまう
	- ので、流れとしては、
		- 本番同等のスキーマ情報をschema.prismaに入れる
		- そこから全てのスキーマ情報を作成するマイグレーションファイルを生成する
		- そのマイグレーションファイルを適用済みにマークする
		- ここまでの変更をコミットして確定させる
- ということだねー
- 
