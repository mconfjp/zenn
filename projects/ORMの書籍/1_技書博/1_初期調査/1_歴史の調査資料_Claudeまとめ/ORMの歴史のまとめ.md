# ORM（Object-Relational Mapping）の歴史に関する調査まとめ

## 1. ORMの概念と誕生の背景

### 1.1 ORMの基本的な定義
- Object-Relational Mapping（ORM）は、オブジェクト指向プログラミング言語とリレーショナルデータベース間のデータを自動的に変換する技術
- リレーショナルデータベースのテーブルとオブジェクト指向言語のクラス/オブジェクトを橋渡しする「仮想的なオブジェクトデータベース」を作成する [4][5]

### 1.2 ORMが解決しようとした課題
- **インピーダンスミスマッチ（Impedance Mismatch）** - オブジェクト指向パラダイムとリレーショナルパラダイムの根本的な違い [2][6]
  - オブジェクト指向：オブジェクトはデータと振る舞いを持ち、継承やポリモーフィズムをサポート
  - リレーショナル：データを表形式で表現、集合論に基づく
  - 主な違い：
    - データ型の違い（JavaのString vs OracleのVARCHAR）
    - 関連の表現方法（オブジェクト参照 vs 外部キー）
    - データアクセスパターン（オブジェクトトラバーサル vs JOIN）
    - アイデンティティの概念（オブジェクトアイデンティティ vs 主キー）

### 1.3 データベースとオブジェクト指向の歴史的接点
- 1980年代：オブジェクト指向プログラミングとリレーショナルデータベースの両方が普及
- 1980年代後半〜1990年代前半：クライアント/サーバーモデルへの移行
- メインフレームからコモディティハードウェアへ
- リレーショナルデータベースがビジネスの基幹システムとして定着
- 開発者は両パラダイムを橋渡しする必要性に直面 [11]

## 2. ORMの歴史的変遷

### 2.1 最初期のORM的な試み（1980年代〜1990年代初頭）
- オブジェクト指向プログラミング言語（C++、Smalltalk）の普及に伴い、開発者はオブジェクトをリレーショナルデータベースに永続化する方法を模索
- 主なアプローチ：
  - ParcPlace ObjectLens：ORMの概念の起源とされるSmalltalkフレームワーク
  - Rogue Wave DBTools（C++）：標準ストリームAPIをオーバーロードしてSQLクエリをオブジェクトに投影
  - NeXT DbKit：データベース抽象化レイヤーの概念を導入
  - IBM ObjectExtender：VisualAge Smalltalk製品の一部 [11]

### 2.2 エポックメイキングな製品：TopLink

**TopLinkの誕生と発展**
- 開発元：The Object People（カナダ、1989年設立）[12][25][28]
- 最初のバージョン：
  - 1994年：TopLink for Smalltalk
  - 1996-1998年：TopLink for Java（Java版への移植）
- 名前の由来："TOP"は"The Object People"の略

**TopLinkの重要性**
- データマッパーパターンを実装した最初期の製品の1つ
- 以下の重要なORM概念を導入：
  - オブジェクトからテーブルへのマッピング
  - レイジーローディング
  - キャッシング
  - これらの機能は現代のORMツールの標準機能となっている [11][19]

**TopLinkの歴史的経緯**
- 2000年：The Object Peopleが買収・分割
  - コンサルティング部門→BEA Systemsへ
  - TopLink製品→WebGainへ
- 2002年：Oracle Corporationが買収 [33][35]
- 2007年：OracleがTopLinkのコードをEclipse Foundationに寄贈→EclipseLinkプロジェクト誕生

### 2.3 その他の初期ORM製品とEntity Beans
- 2001年：EJB 2.0（Enterprise JavaBeans）仕様リリース
- 2002年：Java Data Objects (JDO) が登場（TopLinkに影響を受けた設計）
- 2003年：EJB 2.1仕様リリース

### 2.4 ORMの普及期（2000年代）
- **2002年：Hibernateの登場**
  - Gavin Kingが開発
  - オープンソースで無料
  - EJBの複雑さへの反発から人気を獲得
  - 後にJPA（Java Persistence API）の基礎となる

**なぜHibernateが成功したか** [12]
- TopLinkは技術的に優れていたが、ライセンスモデルが製品単位
- EJBは高価なアプリケーションサーバーが必要（CPU単位のライセンス）
- Hibernateの登場により、オープンソースORMが主流になっていく

## 3. 情報科学史におけるORMの位置づけ

### 3.1 データベース技術発展の中でのORM登場の意味
- 1970年代：リレーショナルデータベースの登場
- 1980年代：RDBMSの商用化と普及
- 1990年代：オブジェクトデータベース（OODBMS）への期待
	- 「Object Relational DBMSs: The Next Great Wave」(1995年)という書籍タイトルが時代の期待を象徴
- 1990年代半ば：ORMが「実用的な妥協案」として登場 [11]

### 3.2 プログラミングパラダイムの変遷との関係
**パラダイムの衝突と文化的分断**
- オブジェクト指向陣営：「オブジェクト狂信者」と自称するほど熱狂的
- リレーショナル陣営：数学的基礎（集合論）に基づく堅牢性を重視
- ORMは両者が妥協せずに共存できる「橋渡し」として機能

### 3.3 ソフトウェア工学史における位置づけ
**ORMの歴史的意義**
1. 実用主義の勝利：理想的な解決策（OODBMS）より、実用的な解決策（ORM）が選ばれた
2. 抽象化レイヤーの進化：アセンブリ→高級言語→オブジェクト指向→ORMという流れ
3. エンタープライズJavaの発展における役割
4. オープンソース運動との関係：Hibernateの成功は、オープンソースがエンタープライズ市場で商用製品に勝利した象徴的な事例

**「情報科学のベトナム」と呼ばれた理由**
Ted Newardが2004年に言った有名な言葉：
> "Object/relational mapping is the Vietnam of Computer Science"

この比喩の意味：
- 最初は良さそうに見える
- 時間とともに複雑化する
- 明確な終了条件、勝利条件、出口戦略がない
- 一度始めると抜け出せない泥沼

## 4. エンタープライズORMの高度な機能

### 4.1 トランザクション管理機能
TopLink/Hibernateの例：
- 分散トランザクション対応（JTA統合）
- Unit of Work（作業単位）パターン
- 2フェーズコミット対応
- 楽観的/悲観的ロック両対応 [95][99]

### 4.2 キャッシュ管理
- セッションキャッシュ
- Unit of Workキャッシュ  
- 分散キャッシュ同期
- 古いデータ（Stale Data）対策 [96][98]

### 4.3 セキュリティ機能
- SQLインジェクション対策
- 監査ログ機能（Hibernate Envers）
- 権限管理との統合
- Virtual Private Database（VPD）サポート [90]

## 5. MySQLの発展とORM

### 5.1 MySQLの初期（1995年〜2000年）
- 1995年：MySQL 1.0リリース
- 初期は軽量・高速だが機能限定的（トランザクションなし、外部キーなし、ACIDなし）

### 5.2 エンタープライズ機能の追加
- 2001年：InnoDB統合の提案（Heikki Tuuri）
- 2001年10月：MySQL 4.0アルファ版（InnoDB搭載）
- 2003年3月：MySQL 4.0正式リリース
  - トランザクションサポート、行レベルロック、ACID準拠 [103]

### 5.3 エンタープライズデータベース市場（1990年代〜2000年代初頭）
主要プレイヤー：
1. Oracle（1979年〜）：最初の商用リレーショナルデータベース
2. IBM DB2（1983年〜）：メインフレーム版と分散版
3. Microsoft SQL Server（1989年〜）
4. Sybase（後にSAP Sybase ASE）

## 6. OOP以前のデータベース抽象化

### 6.1 Embedded SQL（1970年代後半〜）
- プログラミング言語にSQLを直接埋め込む
- プリコンパイラが必要
- 問題点：言語依存性が高い、ポータビリティが低い

### 6.2 Call Level Interface（CLI）- 1980年代後半〜
- 1989年：SQL Access Group (SAG) 設立
- 関数呼び出しベースのAPI
- プリコンパイラ不要

### 6.3 ODBC（Open Database Connectivity）- 1992年〜
- 1992年：MicrosoftとSimba Technologiesが共同開発
- SAGのCLI標準をベースに拡張
- ドライバーベースのアーキテクチャ
- データベース・OS非依存
- 現在でも広く使用されている [127][129]

## 7. PHPとMySQLの初期データアクセス（1990年代末〜2000年代初頭）

1990年代末のLAMPスタックでは：
- 開発者は生のSQLを直接記述
- mysql_connect()、mysql_query()などの関数を使用
- 結果を手動でPHPの変数にマッピング
- OOPSQLインジェクションのリスクが高い
- ORMのような抽象化層は存在しなかった [69]

```php
mysql_connect('localhost', 'username', 'password');
mysql_select_db("dbname");
$result = mysql_query("SELECT * FROM users");
while ($row = mysql_fetch_assoc($result)) {
    echo $row['name'];
}
```

## まとめ

ORMの歴史は、異なるパラダイム（オブジェクト指向とリレーショナル）の間の実用的な橋渡しとして始まりました。TopLinkが先駆者となり、Hibernateがオープンソース化を推進し、現代のWeb開発に不可欠な技術となっています。

技術的には完璧な解決策ではないものの、開発生産性の向上に大きく貢献し、エンタープライズソフトウェア開発の標準的なアプローチとして定着しています。

# リンク
[[ORMに先行するDB抽象化は存在する]]
[[ORMは2000年代前後の、IT業界にOSSが浸透し時代が切り替わるタイミングで普及した]]
