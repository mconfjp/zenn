---
title: "3-7. Unsupported database features（サポートされていないデータベース機能）"
---

# Unsupported database features（サポートされていないデータベース機能）

Prisma Migrateは、**Prismaスキーマ**を使用して、データベースに作成すべき機能を決定します。しかし、一部のデータベース機能はPrismaスキーマでは**表現できません**。これには、以下のようなものが含まれますが、これらに限定されません。

  * **ストアドプロシージャ**
  * **トリガー**
  * **ビュー**
  * **部分インデックス**

サポートされていない機能をデータベースに追加するには、マイグレーションを適用する**前に**、その機能を含めるようにマイグレーションを**カスタマイズ**する必要があります。

> **💡 ヒント:**
> Prismaスキーマは、**サポートされていないフィールド型**や**ネイティブデータベース関数**を表現することは可能です。

> **⚠️ 警告:**
> このガイドは **MongoDBには適用されません**。MongoDBでは `migrate dev` の代わりに `db push` が使用されます。

-----

## ✍️ サポートされていない機能を含めるためのマイグレーションのカスタマイズ

サポートされていない機能をマイグレーションに含めるための手順は以下の通りです。

1.  **`--create-only` フラグ**を使用して、マイグレーションを適用せずに**生成**します。

    ```bash
    npx prisma migrate dev --create-only
    ```

2.  生成された **`migration.sql` ファイルを開き**、サポートされていない機能のSQLを追加します。

      * **例: 部分インデックスの追加**
        ```sql
        CREATE UNIQUE INDEX tests_success_constraint
        ON posts (subject, target)
        WHERE success;
        ```

3.  マイグレーションを**適用**します。

    ```bash
    npx prisma migrate dev
    ```

4.  変更したマイグレーションをソース管理に**コミット**します。
